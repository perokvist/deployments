name: push rps to web apps for containers

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    - uses: azure/webapps-deploy@v2 #https://docs.microsoft.com/en-us/azure/app-service/deploy-container-github-action?tabs=publish-profile
      with:
        app-name: 'rps-web'
        images: 'ghcr.io/perokvist/fiffi/rps.web:latest'
        publish-profile: ${{ secrets.AZURE_WEBAPP_PUBLISH_PROFILE }}
        configuration-file: .\dapr\docker-compose
      env:
        IMAGE_NAME: 'fiffi/rps.web:latest'
        DOCKER_REGISTRY: 'ghcr.io/perokvist'
        STORAGE_ACCOUNT_NAME: 'daprweb'
   
